use crate::wasm4;
use crate::palette::set_draw_color;

// BaseSheet
const BASE_SHEET_WIDTH: u32 = 256;
// const BASE_SHEET_HEIGHT: u32 = 22;
// const BASE_SHEET_FLAGS: u32 = 1; // BLIT_2BPP
const BASE_SHEET: [u8; 1408] = [
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa,
    0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55,
    0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55,
    0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9,
    0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55,
    0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55,
    0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xa5, 0x55, 0x55, 0x55, 0x5a, 0xa5, 0x55, 0x55, 0x55, 0x5a, 0xa5, 0x55, 0x55, 0x55, 0x5a, 0xa5,
    0x55, 0x55, 0x55, 0x5a, 0xa5, 0x55, 0x55, 0x55, 0x5a, 0xa5, 0x55, 0x55, 0x55, 0x5a, 0xa5, 0x55,
    0x55, 0x55, 0x5a, 0xa5, 0x55, 0x55, 0x55, 0x5a, 0xa5, 0x55, 0x55, 0x55, 0x5a, 0xa5, 0x55, 0x55,
    0x55, 0x5a, 0xa5, 0x55, 0x55, 0x55, 0x5a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0x55, 0x55, 0x55, 0x56, 0x95, 0x55, 0x55, 0x55, 0x56, 0x95, 0x55, 0x55, 0x55, 0x56, 0x95,
    0x55, 0x55, 0x55, 0x56, 0x95, 0x55, 0x55, 0x55, 0x56, 0x95, 0x55, 0x55, 0x55, 0x56, 0x95, 0x55,
    0x55, 0x55, 0x56, 0x95, 0x55, 0x55, 0x55, 0x56, 0x95, 0x55, 0x55, 0x55, 0x56, 0x95, 0x55, 0x55,
    0x55, 0x56, 0x95, 0x55, 0x55, 0x55, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0x6a, 0x55, 0xa9, 0x56, 0x95, 0x6a, 0x55, 0xa9, 0x56, 0x95, 0x6a, 0x55, 0xa9, 0x56, 0x95,
    0x6a, 0x55, 0xa9, 0x56, 0x95, 0x6a, 0x55, 0xa9, 0x56, 0x95, 0x6a, 0x55, 0xa9, 0x56, 0x95, 0x6a,
    0x55, 0xa9, 0x56, 0x95, 0x6a, 0x55, 0xa9, 0x56, 0x95, 0x6a, 0x55, 0xa9, 0x56, 0x95, 0x6a, 0x55,
    0xa9, 0x56, 0x95, 0x6a, 0x55, 0xa9, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0xa0, 0x96, 0x0a, 0x56, 0x95, 0xa0, 0x96, 0x0a, 0x56, 0x95, 0xa0, 0x96, 0x0a, 0x56, 0x95,
    0xa0, 0x96, 0x0a, 0x56, 0x95, 0xa0, 0x96, 0x0a, 0x56, 0x95, 0xa0, 0x96, 0x0a, 0x56, 0x95, 0xa0,
    0x96, 0x0a, 0x56, 0x95, 0xa0, 0x96, 0x0a, 0x56, 0x95, 0xa0, 0x96, 0x0a, 0x56, 0x95, 0xa0, 0x96,
    0x0a, 0x56, 0x95, 0xaa, 0x96, 0xaa, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x96, 0x80, 0x28, 0x02, 0x96, 0x96, 0x80, 0x28, 0x02, 0x96, 0x96, 0x80, 0x28, 0x02, 0x96, 0x96,
    0x80, 0x28, 0x02, 0x96, 0x96, 0x80, 0x28, 0x02, 0x96, 0x96, 0x80, 0x28, 0x02, 0x96, 0x96, 0x80,
    0x28, 0x02, 0x96, 0x96, 0x80, 0x28, 0x02, 0x96, 0x96, 0x80, 0x28, 0x02, 0x96, 0x96, 0xaa, 0xaa,
    0xaa, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96,
    0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00,
    0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x96, 0xaa, 0xaa,
    0xaa, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96,
    0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00,
    0x00, 0x00, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x96, 0xaa, 0xaa,
    0xaa, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96,
    0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0x00, 0x00, 0x00, 0x96, 0x96, 0xaa,
    0xaa, 0xaa, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x96, 0xaa, 0xaa,
    0xaa, 0x96, 0x96, 0xaa, 0xaa, 0xaa, 0x96, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0x80, 0x00, 0x02, 0x56, 0x95, 0x80, 0x00, 0x02, 0x56, 0x95, 0x80, 0x00, 0x02, 0x56, 0x95,
    0x80, 0x00, 0x02, 0x56, 0x95, 0x80, 0x00, 0x02, 0x56, 0x95, 0xaa, 0xaa, 0xaa, 0x56, 0x95, 0xaa,
    0xaa, 0xaa, 0x56, 0x95, 0xaa, 0xaa, 0xaa, 0x56, 0x95, 0xaa, 0xaa, 0xaa, 0x56, 0x95, 0xaa, 0xaa,
    0xaa, 0x56, 0x95, 0xaa, 0xaa, 0xaa, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0x60, 0x00, 0x09, 0x56, 0x95, 0x60, 0x00, 0x09, 0x56, 0x95, 0x60, 0x00, 0x09, 0x56, 0x95,
    0x60, 0x00, 0x09, 0x56, 0x95, 0x6a, 0xaa, 0xa9, 0x56, 0x95, 0x6a, 0xaa, 0xa9, 0x56, 0x95, 0x6a,
    0xaa, 0xa9, 0x56, 0x95, 0x6a, 0xaa, 0xa9, 0x56, 0x95, 0x6a, 0xaa, 0xa9, 0x56, 0x95, 0x6a, 0xaa,
    0xa9, 0x56, 0x95, 0x6a, 0xaa, 0xa9, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0x58, 0x00, 0x25, 0x56, 0x95, 0x58, 0x00, 0x25, 0x56, 0x95, 0x58, 0x00, 0x25, 0x56, 0x95,
    0x5a, 0xaa, 0xa5, 0x56, 0x95, 0x5a, 0xaa, 0xa5, 0x56, 0x95, 0x5a, 0xaa, 0xa5, 0x56, 0x95, 0x5a,
    0xaa, 0xa5, 0x56, 0x95, 0x5a, 0xaa, 0xa5, 0x56, 0x95, 0x5a, 0xaa, 0xa5, 0x56, 0x95, 0x5a, 0xaa,
    0xa5, 0x56, 0x95, 0x5a, 0xaa, 0xa5, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0x56, 0x00, 0x95, 0x56, 0x95, 0x56, 0x00, 0x95, 0x56, 0x95, 0x56, 0xaa, 0x95, 0x56, 0x95,
    0x56, 0xaa, 0x95, 0x56, 0x95, 0x56, 0xaa, 0x95, 0x56, 0x95, 0x56, 0xaa, 0x95, 0x56, 0x95, 0x56,
    0xaa, 0x95, 0x56, 0x95, 0x56, 0xaa, 0x95, 0x56, 0x95, 0x56, 0xaa, 0x95, 0x56, 0x95, 0x56, 0xaa,
    0x95, 0x56, 0x95, 0x56, 0xaa, 0x95, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x95, 0x55, 0x82, 0x55, 0x56, 0x95, 0x55, 0xaa, 0x55, 0x56, 0x95, 0x55, 0xaa, 0x55, 0x56, 0x95,
    0x55, 0xaa, 0x55, 0x56, 0x95, 0x55, 0xaa, 0x55, 0x56, 0x95, 0x55, 0xaa, 0x55, 0x56, 0x95, 0x55,
    0xaa, 0x55, 0x56, 0x95, 0x55, 0xaa, 0x55, 0x56, 0x95, 0x55, 0xaa, 0x55, 0x56, 0x95, 0x55, 0xaa,
    0x55, 0x56, 0x95, 0x55, 0xaa, 0x55, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xa5, 0x55, 0x69, 0x55, 0x5a, 0xa5, 0x55, 0x69, 0x55, 0x5a, 0xa5, 0x55, 0x69, 0x55, 0x5a, 0xa5,
    0x55, 0x69, 0x55, 0x5a, 0xa5, 0x55, 0x69, 0x55, 0x5a, 0xa5, 0x55, 0x69, 0x55, 0x5a, 0xa5, 0x55,
    0x69, 0x55, 0x5a, 0xa5, 0x55, 0x69, 0x55, 0x5a, 0xa5, 0x55, 0x69, 0x55, 0x5a, 0xa5, 0x55, 0x69,
    0x55, 0x5a, 0xa5, 0x55, 0x69, 0x55, 0x5a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9,
    0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55,
    0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0xa9, 0x55, 0x55,
    0x55, 0x6a, 0xa9, 0x55, 0x55, 0x55, 0x6a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa,
    0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55,
    0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0xaa, 0x55, 0x55,
    0x55, 0xaa, 0xaa, 0x55, 0x55, 0x55, 0xaa, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa,
    0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
];

pub struct Base {
    pub xpos: i32,
    pub ypos: i32,
    width: u32,
    height: u32,
    pub base_hp: u32,
}

impl Base {
    pub fn new() -> Self {
        Self {
            width: 20,
            height: 20,
            xpos: 80,
            ypos: 80,
            base_hp: 200,
        }
    }
    pub fn draw(&self) {
        set_draw_color(0x0234);
        wasm4::blit_sub(&BASE_SHEET, 68, 68, 20, 20, self.base_hp, 1, BASE_SHEET_WIDTH, 1);
    }
    pub fn base_hit(&mut self) -> bool {
        if self.base_hp > 20 {
            self.base_hp -= 20;
            wasm4::trace("---  Base Hit  ---");
            return false;
        } else if self.base_hp <= 20 {
            self.base_hp -= 20;
            wasm4::trace("---  You Win  ---");
            return true;
        }
        return true;
    }
}
